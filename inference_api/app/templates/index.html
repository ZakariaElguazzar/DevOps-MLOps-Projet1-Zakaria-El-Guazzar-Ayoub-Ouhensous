<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Classification d'Images üß†</title>
    <link rel="stylesheet" href="/static/style.css">
</head>
<body>

<div class="container">
    <header>
        <h1>Classification d'Images <span>üß†</span></h1>
    </header>

    <form action="/predict-ui" method="post" enctype="multipart/form-data">
        
        <div class="form-group">
            <label for="model-select">Choisir le mod√®le :</label>
            <select name="model_name" id="model-select">
                <option value="cnn">CNN Simple</option>
                <option value="mobilenet">MobileNetV2</option>
            </select>
        </div>

        <div class="file-upload-area">
            <input type="file" name="file" id="file-input" accept="image/*" required>
            <label for="file-input" class="custom-file-label">
                <span class="icon">‚¨ÜÔ∏è</span>
                <span class="text">S√©lectionner une image</span>
            </label>
            <div class="image-preview-container">
                <img id="image-preview" src="placeholder.png" alt="Pr√©visualisation de l'image" class="hidden">
                <p id="preview-text">Aucune image s√©lectionn√©e</p>
            </div>
        </div>

        <button type="submit" class="btn-primary">Pr√©dire</button>
    </form>

    {% if prediction %}
    <div class="result-card">
        <h2>R√©sultat de la Pr√©diction</h2>
        
        <div class="result-details">
            <div class="detail-item">
                <span class="icon">ü§ñ</span>
                <p class="label">Mod√®le</p>
                <p class="value">{{ model }}</p>
            </div>
            
            <div class="detail-item prediction-item">
                <span class="icon">üè∑Ô∏è</span>
                <p class="label">Classe Pr√©dite</p>
                <p class="value-large">{{ prediction }}</p>
            </div>
            
            <div class="detail-item">
                <span class="icon">‚úÖ</span>
                <p class="label">Confiance</p>
                <p class="value">{{ confidence }}</p>
            </div>
        </div>
    </div>
    {% endif %}
</div>

<!-- Note: Le code JavaScript pour la pr√©visualisation doit √™tre ajout√© ici -->
<script>
    document.addEventListener('DOMContentLoaded', () => {
        const fileInput = document.getElementById('file-input');
        const imagePreview = document.getElementById('image-preview');
        const previewText = document.getElementById('preview-text');
        const customLabelText = document.querySelector('.custom-file-label .text');

        fileInput.addEventListener('change', (event) => {
            const file = event.target.files[0];
            if (file) {
                const reader = new FileReader();
                reader.onload = (e) => {
                    imagePreview.src = e.target.result;
                    imagePreview.classList.remove('hidden');
                    previewText.style.display = 'none';
                    customLabelText.textContent = file.name;
                };
                reader.readAsDataURL(file);
            } else {
                imagePreview.src = 'placeholder.png';
                imagePreview.classList.add('hidden');
                previewText.style.display = 'block';
                customLabelText.textContent = 'S√©lectionner une image';
            }
        });
    });
</script>

</body>
</html>
